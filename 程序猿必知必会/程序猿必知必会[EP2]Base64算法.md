## 程序猿必知必会[EP2]Base64编码

### 1. 基础信息：

- Base64是网络上最常见的用于**传输8bit字节码**的编码方式之一。
- Base64就是一种**基于64种可打印字符表示二进制数据**的方法，具有**不可读性，需要解码才能阅读**。
- Base64规定，加密后的数据最后可能会出现0-2个`=`，也就是第65种字符，但和被加密的原数据并没有直接对应关系，只是用于标记多余字符数量，便于解码。
- **Base64还有很多变种，以适应多种情况**，例如适应HTTP中的URL。

### 2. 算法基础实现：

- 下列算法陈述仅限于基础的Base64编解码算法，语言载体使用Java。

- 建立Base64对应表，由于Base64对应各种情况会有不同的表，这里给出两种最基础版本。

  ```java
  // 不适用于URL
  // 总计64个字符
  private static final char[] toBase64 = {
  	'A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M',
  	'N', 'O', 'P', 'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z',
  	'a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l', 'm',
  	'n', 'o', 'p', 'q', 'r', 's', 't', 'u', 'v', 'w', 'x', 'y', 'z',
  	'0', '1', '2', '3', '4', '5', '6', '7', '8', '9', '+', '/'
  };
  
  // 适用于URL
  // 总计64个字符
  private static final char[] toBase64URL = {
  	'A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M',
  	'N', 'O', 'P', 'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z',
  	'a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l', 'm',
  	'n', 'o', 'p', 'q', 'r', 's', 't', 'u', 'v', 'w', 'x', 'y', 'z',
  	'0', '1', '2', '3', '4', '5', '6', '7', '8', '9', '-', '_'
  };
  
  // 上述两者的根本区别在于最后两个字符
  ```

#### 2.1. Base64编码算法：

- 算法输入输出：
  - 输入：一个字节数组；
  - 输出：一个字节数组；
- 流程：
  - 计算出输出字节数组长度；
    - 通常是`输出数组长度 = (输入数组长度 + 2) / 3 * 4`
  - 原字符数组每3个元素，映射到输出数组的4个元素中；
    - 换句话说，就是将24bits（3 bytes）的数据扩张到32bits（4 bytes）中去。
    - 更具体一点说就是将24bits（3 bytes）拆成6bits * 4，每个6bits就能在Base64对应表中找到对应字符，放入输出数组的一个字节中。
  - 对于源字节数组多出来的1或者2 bytes，除了按照每6bits一次对应表映射（最后2bits可以选择在后添0构成6bits）外，还要添`=`；
    - 多余1bit，添2个`=`。
    - 多余2bits，添1个`=`。
  - 输出结果数组。

#### 2.2.Base64解码算法：

- 算法输入输出：
  - 输入：一个字节数组；
  - 输出：一个字节数组；
- 流程：
  - 计算出输出字节数组长度；
    - 通常是`输出数组长度 = (输入数组长度 + 2) / 3 * 4`
  - 原字符数组每3个元素，映射到输出数组的4个元素中；
    - 换句话说，就是将24bits（3 bytes）的数据扩张到32bits（4 bytes）中去。
    - 更具体一点说就是将24bits（3 bytes）拆成6bits * 4，每个6bits就能在Base64对应表中找到对应字符，放入输出数组的一个字节中。
  - 对于源字节数组多出来的1或者2 bytes，除了按照每6bits一次对应表映射（最后2bits可以选择在后添0构成6bits）外，还要添`=`；
    - 多余1bit，添2个`=`。
    - 多余2bits，添1个`=`。
  - 输出结果数组。

### 4. 用途：

- HTTP协议下快速传输数据。使用适用于URL的Base64对应表，能直接在HTTP的URL传递不可读的数据。
- Web应用中能将一些固定的体积较小的图片直接使用Base64编码，静态写入前端页面中。
- 对于一些安全性不是特别高的，但需要有一定不可读性的数据，可以选择Base64编码。

### 5. 安全性：

- 首先，Base64本质上不算一种加解密算法，虽然有不可读性，但解密并不需要私钥，直接就能破解。
- 因此根据这个特性，Base64只适用于需要不可读性但安全要求不高的场景。
- 同时经过Base64编码后，结果中会出现`=`的特定也导致了，该编码方式的特征很明显，安全性并不高。



### 6. Java中使用：

- 使用JDK自带的`java.util.Base64`实现Base64的编解码

### 7. 结尾：

- 关于MD5的那些事就说到这里了，原理部分没涉及太多，因为MD5的原理确实说不上简单。
- 但是总的来说对MD5的使用应该是理通了，如果有什么错误的地方还望指教（轻喷）。
- 希望以这个【必知必会】系列激励自己不断学习！！！



- **参考文档，感谢各位博主的分析和分享：**
