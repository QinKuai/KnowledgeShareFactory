## 64位long的取值范围所引发的数学思考

### 一. 前言

最近在思考64位long的具体取值范围时，顺势想到了把这个问题转化为一个数学问题来试着求解，算是不务正业吧。不管怎么说还挺有意思的，虽然也有一年多没接触数学了，但数学依旧是美丽而充满乐趣😊



### 二. 内容

对于64位的long，虽然最大值是$2^{64} - 1$，这个值的范围其实很好得到$10^{19}<2^{64} - 1<10^{20}$，但由其可以衍生出一个有意思的**不等式问题**：
$$
10^{18} < 2^{63} - 1 < 10^{19}
$$
那么该如何通过**不具体求值或是少量简单的具体求值**来求证这个式子呢？

让我们继续：

- 首先先处理前半部分$10^{18} < 2^{63} - 1$，这个部分其实还算简单 ，只需要简单几步就能解决：
  $$
  2^{10} > 10^3\\
  \Leftrightarrow2^{60} > 10^{18}\\
  \Leftrightarrow2^{63} > 8 \times 10^{18}\\
  \Leftrightarrow2^{63} - 1 > 8 \times 10^{18} - 1 > 10^{18}
  $$
  顺带一提从上面的式子同样可以得出long的最大值$2^{64}-1$的左边界的证明：
  $$
  2^{60} > 10^{18}\\
  \Leftrightarrow2^{64} > 1.6 \times 10^{19}\\
  \Leftrightarrow2^{64} - 1 > 1.6 \times 10^{19} - 1 > 10^{19}
  $$
  
- 然后就是相对来说比较复杂的右边界的证明问题了，由于$2^{63}$的值离$10^{19}$非常近，这就让证明不等式难度不小：

  $$
  2^{63} - 1< 2^{63} < 10^{19}\\
  \Leftrightarrow 2^{64} < 0.2 \times 10^{20}\\
  \Leftrightarrow 2^{16} < \sqrt[4]{0.2} \times 10^{5}\\
  \Leftrightarrow 0.65536 \times 10^{5} < \sqrt[4]{0.2} \times 10^{5}\\
  \Leftrightarrow 0.65536 < \sqrt[4]{0.2}\\
  \Leftrightarrow 0.65536^4 < 0.66^4 = 0.18974736‬ < 0.2
  $$
  

  **上述步骤本身是等价推导，所以只需要反向推回去就能得到证明结果了。**

  **上述推导还需要两个条件：**

  - **幂函数在第一象限都是增函数；**
  - **手动计算$2^{16}$和$0.66^4$的具体值，前者对大家来说都算熟悉，后者可能需要计算以下。**

  同样的在证明的过程中，也顺道证明了$2^{64}-1<2^{64}<0.2 \times 10^{20} < 10^{20}$的结论了



### 三. 结言

- 这次是脑洞一开就想到的东西，随手就想分享出来，所以可能证明过程并没有多严谨，很多地方为了简介就简化了证明的书写流程。
- **有其他想法或者我的证明过程有逻辑硬伤的地方，请务必告知于我，蟹蟹！！**
- 其实再说回来，其实对于程序猿的我来说，**需要记住的就是long的最大值在$10^{19} - 10^{20}$之间就足够了，最需要关注的就是当数值可能很大时，不要一直使用int，避免数据溢出了就足够了。**